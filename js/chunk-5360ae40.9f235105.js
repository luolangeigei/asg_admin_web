(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5360ae40"],{3783:function(t,e,s){},b492:function(t,e,s){"use strict";s("3783")},effb:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("p",{staticClass:"title"},[t._v("发布公告"),e("i",{class:t.iconToggle,attrs:{id:"icon-show"},on:{click:t.toggleIcon}},[t._v(t._s(t.showMsg))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowBox,expression:"isShowBox"}],staticClass:"box-wrap"},[e("el-input",{staticStyle:{width:"40%","margin-bottom":"20px"},attrs:{placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),e("el-input",{staticStyle:{width:"70%","margin-bottom":"20px"},attrs:{type:"textarea",rows:3,placeholder:"请输入标题"},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}}),e("br"),e("el-button",{attrs:{type:"warning"},on:{click:t.pushNews}},[t._v("发布")])],1),e("div",{staticClass:"line"}),e("p",{staticClass:"title"},[t._v("公告详情")]),e("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.newsData}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"wrap"},[e("el-tag",{attrs:{size:"small"}},[t._v("发布人:"+t._s(s.row.formName))]),e("p",[t._v(t._s(s.row.msg))])],1)]}}])}),e("el-table-column",{attrs:{prop:"id",label:"序号",width:"180"}}),e("el-table-column",{attrs:{prop:"title",label:"标题",width:"auto"}}),e("el-table-column",{attrs:{prop:"formName",label:"管理员",width:"180"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.delNews(s.row)}}},[t._v("删除")])]}}])})],1)],1)},o=[],n=s("b775");function a(t,e){return n["a"].post("/api/v1/admin/news",{title:t,msg:e})}function l(){return n["a"].get("/api/v1/news")}function c(t){return n["a"].delete("/api/v1/admin/news?newid="+t)}var r={name:"News",data(){return{title:"",msg:"",newsData:[],iconToggle:"el-icon-download",isShowBox:!1,showMsg:"点击发布"}},methods:{pushNews(){a(this.title,this.msg).then(()=>{this.$message.success("发布成功！"),this.title="",this.msg=""}).catch(t=>{console.log(t)})},initNews(){l().then(t=>{this.newsData=t.data}).catch(t=>{console.log(t)})},delNews(t){this.$confirm("是否缺人删除该公告","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{c(t.id).then(()=>{this.$message.success("删除成功！"),this.initNews()}).catch(()=>{console.log("err")})})},toggleIcon(){"el-icon-download"===this.iconToggle?(this.isShowBox=!0,this.iconToggle="el-icon-upload2",this.showMsg="折叠"):(this.isShowBox=!1,this.iconToggle="el-icon-download",this.showMsg="点击发布")}},mounted(){this.initNews()}},u=r,w=(s("b492"),s("2877")),h=Object(w["a"])(u,i,o,!1,null,"dda86e96",null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-5360ae40.9f235105.js.map
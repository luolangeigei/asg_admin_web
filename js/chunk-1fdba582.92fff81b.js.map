{"version":3,"sources":["webpack:///./src/api/gameSeason/index.js","webpack:///./src/view/enroll/component/AllTeam.vue?279d","webpack:///./src/view/enroll/component/AllTeam.vue","webpack:///src/view/enroll/component/AllTeam.vue","webpack:///./src/view/enroll/component/AllTeam.vue?d6c7","webpack:///./src/view/enroll/component/AllTeam.vue?0c56"],"names":["getAllEvents","request","url","method","pushNewEvents","name","is_over","opentime","params","deleteEvents","delete","updateEvents","event_name","row","data","id","render","_vm","this","_c","_self","staticStyle","attrs","on","handleChange","model","value","eventsname","callback","$$v","expression","_l","options","item","key","_v","_s","staticClass","isOver","directives","rawName","loading","teamList","formatterTimer","scopedSlots","_u","fn","scope","logo_uri","$event","check","delTeam","currentPage","total","handleCurrentChange","staticRenderFns","mounted","initData","initSeason","methods","page","size","sort","getEnrollList","then","res","setTimeout","catch","err","console","log","column","cellValue","rec","year","slice","month","day","time","$store","commit","$emit","$confirm","confirmButtonText","cancelButtonText","delEnrollTeam","$message","success","error","warning","e","index","map","indexOf","component"],"mappings":"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","file":"js/chunk-1fdba582.92fff81b.js","sourcesContent":["import request from '@/utils/request'\r\n//获取所有比赛\r\nexport function getAllEvents(){\r\n    return request({\r\n        url:'/api/v1/Events',\r\n        method:'get'\r\n    })\r\n}\r\n//发布新赛事\r\nexport function pushNewEvents(name,is_over,opentime){\r\n    return request({\r\n        url:'/api/v1/admin/Events',\r\n        method:'post',\r\n        params:{\r\n          name,\r\n          is_over,\r\n          opentime\r\n        }\r\n    })\r\n}\r\n//删除\r\nexport function deleteEvents(name){\r\n  return request.delete(`/api/v1/admin/Events?event_name=${name}`)\r\n}\r\n//更新\r\nexport function updateEvents(event_name,row){\r\n  return request({\r\n    url:'/api/v1/admin/Events',\r\n    method:'put',\r\n    params:{\r\n      event_name\r\n    },\r\n    data:{\r\n      id:row.id,\r\n      name:row.name,\r\n      is_over:row.is_over,\r\n      opentime:row.opentime\r\n    }\r\n  })\r\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllTeam.vue?vue&type=style&index=0&id=42abe92e&prod&scoped=true&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-row',[_c('el-select',{staticStyle:{\"margin-bottom\":\"10px\",\"margin-right\":\"30px\"},attrs:{\"size\":\"mini\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.eventsname),callback:function ($$v) {_vm.eventsname=$$v},expression:\"eventsname\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.name,attrs:{\"label\":item.name,\"value\":item.name}},[_c('span',[_vm._v(_vm._s(item.name))]),(item.is_over)?_c('i',{staticClass:\"el-icon-warning\",staticStyle:{\"color\":\"red\",\"margin-left\":\"20px\"}}):_c('i',{staticClass:\"el-icon-success\",staticStyle:{\"color\":\"green\",\"margin-left\":\"20px\"}})])}),1),(_vm.isOver)?_c('span',[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"进入赛程页面-赛季-结束赛程\",\"placement\":\"top\"}},[_c('el-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(\"已结束\")])],1)],1):_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"进行中\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"height\":\"75vh\",\"data\":_vm.teamList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"timer\",\"label\":\"报名日期\",\"width\":\"200\",\"formatter\":_vm.formatterTimer}}),_c('el-table-column',{attrs:{\"label\":\"LOGO\",\"width\":\"80\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticClass:\"logo_url\",attrs:{\"src\":scope.row.logo_uri}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"战队名\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"piaoshu\",\"label\":\"获赞数\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"auto\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.check(scope.row)}}},[_vm._v(\"检查\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.delTeam(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":5,\"layout\":\"prev, pager, next, jumper\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-row>\r\n      <el-select\r\n        v-model=\"eventsname\"\r\n        size=\"mini\"\r\n        style=\"margin-bottom: 10px; margin-right: 30px\"\r\n        @change=\"handleChange\"\r\n      >\r\n        <el-option\r\n          v-for=\"item in options\"\r\n          :key=\"item.name\"\r\n          :label=\"item.name\"\r\n          :value=\"item.name\"\r\n        >\r\n          <span>{{ item.name }}</span>\r\n          <i\r\n            v-if=\"item.is_over\"\r\n            style=\"color: red; margin-left: 20px\"\r\n            class=\"el-icon-warning\"\r\n          ></i>\r\n          <i\r\n            v-else\r\n            style=\"color: green; margin-left: 20px\"\r\n            class=\"el-icon-success\"\r\n          ></i>\r\n        </el-option>\r\n      </el-select>\r\n      <span v-if=\"isOver\">\r\n        <el-tooltip\r\n          effect=\"dark\"\r\n          content=\"进入赛程页面-赛季-结束赛程\"\r\n          placement=\"top\"\r\n        >\r\n          <el-tag type=\"danger\">已结束</el-tag>\r\n        </el-tooltip>\r\n      </span>\r\n      <el-tag v-else type=\"success\">进行中</el-tag>\r\n    </el-row>\r\n    <el-table\r\n      height=\"75vh\"\r\n      style=\"width: 100%\"\r\n      :data=\"teamList\"\r\n      border\r\n      v-loading=\"loading\"\r\n    >\r\n      <el-table-column\r\n        prop=\"timer\"\r\n        label=\"报名日期\"\r\n        width=\"200\"\r\n        :formatter=\"formatterTimer\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column label=\"LOGO\" width=\"80\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <img class=\"logo_url\" :src=\"scope.row.logo_uri\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"name\" label=\"战队名\" width=\"200\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"piaoshu\" label=\"获赞数\" width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"auto\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button @click=\"check(scope.row)\" type=\"primary\" size=\"small\"\r\n            >检查</el-button\r\n          >\r\n          <el-button type=\"danger\" size=\"small\" @click=\"delTeam(scope.row)\"\r\n            >删除</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page.sync=\"currentPage\"\r\n      :page-size=\"5\"\r\n      layout=\"prev, pager, next, jumper\"\r\n      :total=\"total\"\r\n    >\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getEnrollList, delEnrollTeam } from \"@/api/enroll/index\";\r\nimport { getAllEvents } from \"@/api/gameSeason/index\";\r\nexport default {\r\n  name: \"AllTeam\",\r\n  mounted() {\r\n    this.initData(1, 10, \"time\", this.eventsname);\r\n    this.initSeason();\r\n  },\r\n  data() {\r\n    return {\r\n      teamList: [],\r\n      options: [],\r\n      currentPage: 1,\r\n      total: 200,\r\n      loading: false,\r\n      // 是否结束\r\n      isOver: null,\r\n      eventsname: \"第一届ASG高校赛\",\r\n    };\r\n  },\r\n  methods: {\r\n    initData(page, size, sort, eventsname) {\r\n      this.loading = true;\r\n      getEnrollList(page, size, sort, eventsname)\r\n        .then((res) => {\r\n          this.teamList = res.data;\r\n          setTimeout(() => {\r\n            this.loading = false;\r\n          }, 1000);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          setTimeout(() => {\r\n            this.loading = false;\r\n          }, 1000);\r\n        });\r\n    },\r\n    //格式化日期\r\n    formatterTimer(row, column, cellValue) {\r\n      let rec;\r\n      let year = cellValue.slice(0, 4);\r\n      let month = cellValue.slice(5, 7);\r\n      let day = cellValue.slice(8, 10);\r\n      let time = cellValue.slice(11, 19);\r\n      rec = year + \"年\" + month + \"月\" + day + \"日\" + \" \" + time;\r\n      return rec;\r\n    },\r\n    //检查事件\r\n    check(row) {\r\n      this.$store.commit(\"updateTeamName\", row.name);\r\n      this.$emit(\"searchteam\",row.name);\r\n    },\r\n    //删除战队\r\n    delTeam(row) {\r\n      this.$confirm(\"是否删除该战队信息?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n      })\r\n        .then(() => {\r\n          delEnrollTeam(row.name)\r\n            .then(() => {\r\n              this.$message.success(\"删除成功\");\r\n              this.initData(1, 10, \"time\", this.eventsname);\r\n            })\r\n            .catch((err) => {\r\n              this.$message.error(\"删除失败\") + err;\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message.warning(\"取消删除！\");\r\n        });\r\n    },\r\n    handleCurrentChange() {\r\n      this.initData(this.currentPage, 10, \"time\", this.eventsname);\r\n    },\r\n    // 获取赛季\r\n    initSeason() {\r\n      getAllEvents()\r\n        .then((res) => {\r\n          this.options = res.data;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    //处理选择框\r\n    handleChange(e) {\r\n      let index = this.options.map((item) => item.name).indexOf(e);\r\n      this.isOver = this.options[index].is_over;\r\n      this.initData(1, 10, \"time\", this.eventsname);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.logo_url {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllTeam.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllTeam.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AllTeam.vue?vue&type=template&id=42abe92e&scoped=true&\"\nimport script from \"./AllTeam.vue?vue&type=script&lang=js&\"\nexport * from \"./AllTeam.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AllTeam.vue?vue&type=style&index=0&id=42abe92e&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42abe92e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
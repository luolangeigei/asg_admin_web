(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c76e2"],{"511a":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.seasonForm}},[t("el-form-item",{attrs:{label:"赛季名"}},[t("el-input",{attrs:{placeholder:"输入赛季名"},model:{value:e.seasonForm.name,callback:function(t){e.$set(e.seasonForm,"name",t)},expression:"seasonForm.name"}})],1),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-input",{model:{value:e.seasonForm.opentime,callback:function(t){e.$set(e.seasonForm,"opentime",t)},expression:"seasonForm.opentime"}})],1),t("el-form-item",{attrs:{label:"报名是否结束"}},[t("el-radio-group",{model:{value:e.seasonForm.is_over,callback:function(t){e.$set(e.seasonForm,"is_over",t)},expression:"seasonForm.is_over"}},[t("el-radio",{attrs:{label:!0}},[e._v("已结束")]),t("el-radio",{attrs:{label:!1}},[e._v("未结束")])],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.pushNewEvents}},[e._v("发布")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.events,border:"",height:"50vh"}},[t("el-table-column",{attrs:{prop:"id",label:"序号",width:"60"}}),t("el-table-column",{attrs:{label:"名字",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.isEdit?t("el-input",{on:{blur:function(t){return e.toggleIsEdit(s.row.isEdit,s.$index)}},model:{value:s.row.name,callback:function(t){e.$set(s.row,"name",t)},expression:"scope.row.name"}}):t("span",{on:{dblclick:function(t){return e.toggleIsEdit(s.row.isEdit,s.$index)}}},[e._v(e._s(s.row.name))])]}}])}),t("el-table-column",{attrs:{label:"是否结束",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#409EFF","active-text":"已结束","inactive-text":"进行中"},model:{value:s.row.is_over,callback:function(t){e.$set(s.row,"is_over",t)},expression:"scope.row.is_over"}})]}}])}),t("el-table-column",{attrs:{label:"开始时间",width:"250"},scopedSlots:e._u([{key:"default",fn:function(s){return[null===s.row.opentime?[t("el-input",{model:{value:s.row.opentime,callback:function(t){e.$set(s.row,"opentime",t)},expression:"scope.row.opentime"}})]:[s.row.isEdit?t("el-input",{on:{blur:function(t){return e.toggleIsEdit(s.row.isEdit,s.$index)}},model:{value:s.row.opentime,callback:function(t){e.$set(s.row,"opentime",t)},expression:"scope.row.opentime"}}):t("span",{on:{dblclick:function(t){return e.toggleIsEdit(s.row.isEdit,s.$index)}}},[e._v(e._s(s.row.opentime))])]]}}])}),t("el-table-column",{attrs:{label:"操作",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.updateItem(s.row)}}},[e._v("更新")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteItem(s.row.name)}}},[e._v("删除")])]}}])})],1)],1)},o=[],i=s("4737"),a={name:"SetSeason",data(){return{seasonForm:{name:"",is_over:!1,opentime:"xxxx-xx-xxT00:00:00"},events:[],loading:!1}},mounted(){this.initEvents()},methods:{pushNewEvents(){Object(i["c"])(this.seasonForm.name,this.seasonForm.is_over,this.seasonForm.opentime).then(e=>{this.$message.success(e.data)}).catch(e=>{console.log(e)})},initEvents(){this.loading=!0,Object(i["b"])().then(e=>{let{data:t}=e;this.events=t;for(var s=0;s<t.length;s++){const e={isEdit:!1};this.events[s]=Object.assign(this.events[s],e)}console.log("🐕",this.events),setTimeout(()=>{this.loading=!1},800)}).catch(()=>{this.$message.error("服务器异常，请联系管理员！"),setTimeout(()=>{this.loading=!1},800)})},deleteItem(e){this.$confirm("是否删除赛季?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["a"])(e).then(()=>{this.$message.success("删除成功！"),this.initEvents()}).catch(()=>{this.$message.error("服务器异常，请联系管理员！")})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},toggleIsEdit(e,t){this.events[t].isEdit=!e,this.events=JSON.parse(JSON.stringify(this.events))},updateItem(e){Object(i["d"])(e.name,e).then(()=>{this.$message.success("更新成功！"),this.initEvents()}).catch(()=>{this.$message.error("服务器异常！")})}}},r=a,l=s("2877"),c=Object(l["a"])(r,n,o,!1,null,"438abe4a",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0c76e2.f3744340.js.map
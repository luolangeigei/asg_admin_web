{"version":3,"sources":["webpack:///./src/view/homepage/Home.vue","webpack:///src/view/homepage/Home.vue","webpack:///./src/view/homepage/Home.vue?ceed","webpack:///./src/view/homepage/Home.vue?7d31","webpack:///./src/view/homepage/Home.vue?bb37"],"names":["render","_vm","this","_c","_self","attrs","staticClass","$store","state","userInfo","base64","slot","chinaname","_v","_s","isadmin","roles","email","id","officium","staticStyle","beforeAvatarUpload","transformBase","uploadImg","model","value","ChinaName","callback","$$v","expression","on","updateName","job","_l","jobs","item","key","label","adminPassword","beSuperAdmin","userName","password","eMail","beAdmin","searchValue","nativeOn","$event","searchByName","apply","arguments","directives","name","rawName","loading","personList","dealRoles","formatRoles","formatBoolean","scopedSlots","_u","fn","scope","setRoles","row","handleSetAdmin","handleDelUser","currentPage","total","handleCurrentChange","staticRenderFns","data","logoImg","mounted","initGetUsers","methods","page","pagesize","getUsers","then","res","console","log","setTimeout","catch","err","updateChinaName","$message","success","initGetInfo","error","enrollAdmin","setAdmin","delUser","val","column","cellValue","ret","rec","includes","setRole","getSuperAdmin","file","reader","FileReader","readAsDataURL","raw","self","onload","result","commit","isLt2M","size","searchName","computed","component"],"mappings":"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","file":"js/chunk-2bef59c1.070da675.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-card',{staticClass:\"box-card\",attrs:{\"shadow\":\"hover\"}},[_c('div',{staticClass:\"user\"},[_c('el-image',{attrs:{\"src\":_vm.$store.state.userInfo.base64,\"fit\":\"cover\"}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-document-delete\"})])]),_c('div',{staticClass:\"userinfo\"},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":_vm.userInfo.chinaname,\"placement\":\"top\"}},[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.userInfo.chinaname))])]),(_vm.userInfo.isadmin)?_c('p',{staticClass:\"access\"},[_vm._v(\" \"+_vm._s(_vm.userInfo.roles[1] ? \"超级管理员\" : \"管理员\")+\" \")]):_c('p',{staticClass:\"access\"},[_vm._v(\"普通用户\")])],1)],1),_c('div',{staticClass:\"login-info\"},[_c('p',[_vm._v(\" 用户使用邮箱：\"),_c('span',[_vm._v(_vm._s(_vm.userInfo.email))])]),_c('p',[_vm._v(\" 用户的序列号：\"),_c('span',[_vm._v(_vm._s(_vm.userInfo.id))])]),_c('p',[_vm._v(\" 该用户的职位：\"),_c('span',[_vm._v(_vm._s(_vm.userInfo.officium))])])])])],1),_c('el-col',{attrs:{\"span\":16}},[_c('el-card',[_c('el-row',[_c('el-col',{staticClass:\"updateInfo\",attrs:{\"span\":12}},[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-upload',{staticStyle:{\"margin\":\"10px\"},attrs:{\"action\":\"\",\"auto-upload\":false,\"list-type\":\"picture-card\",\"show-file-list\":false,\"before-upload\":_vm.beforeAvatarUpload,\"on-change\":_vm.transformBase,\"on-success\":_vm.uploadImg}},[_vm._v(\" 上传头像 \")])],1)],1),_c('el-row',[_c('el-input',{attrs:{\"placeholder\":\"请修改中文名\",\"maxlength\":\"10\",\"show-word-limit\":\"\"},model:{value:(_vm.ChinaName),callback:function ($$v) {_vm.ChinaName=$$v},expression:\"ChinaName\"}}),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateName}},[_c('i',{staticClass:\"el-icon-edit\"}),_vm._v(\"修改\")])],1),_c('el-row',[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.job),callback:function ($$v) {_vm.job=$$v},expression:\"job\"}},_vm._l((_vm.jobs),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-input',{staticStyle:{\"margin\":\"0 0 0 10px\"},attrs:{\"placeholder\":\"请输入密码\"},model:{value:(_vm.adminPassword),callback:function ($$v) {_vm.adminPassword=$$v},expression:\"adminPassword\"}})],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-button',{attrs:{\"type\":\"success\",\"circle\":\"\"},on:{\"click\":_vm.beSuperAdmin}},[_c('i',{staticClass:\"el-icon-thumb\"})])],1)],1)],1),_c('el-col',{attrs:{\"span\":1}},[_c('div',{staticClass:\"line\"})]),_c('el-col',{attrs:{\"span\":11}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用户名\"},model:{value:(_vm.userName),callback:function ($$v) {_vm.userName=$$v},expression:\"userName\"}}),_c('el-input',{attrs:{\"placeholder\":\"请输入密码\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('el-input',{attrs:{\"placeholder\":\"请输入邮箱\"},model:{value:(_vm.eMail),callback:function ($$v) {_vm.eMail=$$v},expression:\"eMail\"}}),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.beAdmin}},[_c('i',{staticClass:\"el-icon-user-solid\"}),_vm._v(\"新增人员\")])],1)],1)],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":6}},[_c('el-input',{attrs:{\"placeholder\":\"请输入名字搜索\"},model:{value:(_vm.searchValue),callback:function ($$v) {_vm.searchValue=$$v},expression:\"searchValue\"}})],1),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{staticStyle:{\"margin\":\"10px\"},attrs:{\"type\":\"success\"},nativeOn:{\"click\":function($event){return _vm.searchByName.apply(null, arguments)}}},[_vm._v(\"搜索\")])],1)],1),_c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('el-col',{attrs:{\"span\":24}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.personList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"序列号\",\"width\":\"70\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"roles\",\"label\":\"身份\",\"width\":\"150\",\"formatter\":_vm.dealRoles}}),_c('el-table-column',{attrs:{\"prop\":\"chinaname\",\"label\":\"中文名\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"用户名\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"officium\",\"label\":\"职位\",\"width\":\"150\",\"formatter\":_vm.formatRoles}}),_c('el-table-column',{attrs:{\"prop\":\"isadmin\",\"label\":\"查看权限\",\"width\":\"160\",\"formatter\":_vm.formatBoolean}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\",\"width\":\"auto\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('button',{staticClass:\"operationBtn\",on:{\"click\":function($event){return _vm.setRoles(scope.row.id)}}},[_vm._v(\" 设职 \")]),_c('button',{staticClass:\"operationBtn\",on:{\"click\":function($event){return _vm.handleSetAdmin(scope.row.id)}}},[_vm._v(\" 设权 \")]),_c('button',{staticClass:\"operationBtn\",on:{\"click\":function($event){return _vm.handleDelUser(scope.row.id)}}},[_vm._v(\" 删除 \")])]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":5,\"layout\":\"prev, pager, next, jumper\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"8\">\r\n        <el-card class=\"box-card\" shadow=\"hover\">\r\n          <div class=\"user\">\r\n            <el-image :src=\"$store.state.userInfo.base64\" fit=\"cover\">\r\n              <div slot=\"error\" class=\"image-slot\">\r\n                <i class=\"el-icon-document-delete\"></i>\r\n              </div>\r\n            </el-image>\r\n            <div class=\"userinfo\">\r\n              <el-tooltip\r\n                class=\"item\"\r\n                effect=\"dark\"\r\n                :content=\"userInfo.chinaname\"\r\n                placement=\"top\"\r\n              >\r\n                <p class=\"name\">{{ userInfo.chinaname }}</p>\r\n              </el-tooltip>\r\n              <p v-if=\"userInfo.isadmin\" class=\"access\">\r\n                {{ userInfo.roles[1] ? \"超级管理员\" : \"管理员\" }}\r\n              </p>\r\n              <p v-else class=\"access\">普通用户</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"login-info\">\r\n            <p>\r\n              用户使用邮箱：<span>{{ userInfo.email }}</span>\r\n            </p>\r\n            <p>\r\n              用户的序列号：<span>{{ userInfo.id }}</span>\r\n            </p>\r\n            <p>\r\n              该用户的职位：<span>{{ userInfo.officium }}</span>\r\n            </p>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"16\">\r\n        <el-card>\r\n          <el-row>\r\n            <el-col class=\"updateInfo\" :span=\"12\">\r\n              <el-row>\r\n                <el-col :span=\"24\">\r\n                  <el-upload\r\n                    action\r\n                    :auto-upload=\"false\"\r\n                    list-type=\"picture-card\"\r\n                    :show-file-list=\"false\"\r\n                    style=\"margin: 10px\"\r\n                    :before-upload=\"beforeAvatarUpload\"\r\n                    :on-change=\"transformBase\"\r\n                    :on-success=\"uploadImg\"\r\n                  >\r\n                    上传头像\r\n                  </el-upload>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-input\r\n                  v-model=\"ChinaName\"\r\n                  placeholder=\"请修改中文名\"\r\n                  maxlength=\"10\"\r\n                  show-word-limit\r\n                ></el-input>\r\n                <el-button @click=\"updateName\" type=\"primary\"\r\n                  ><i class=\"el-icon-edit\"></i>修改</el-button\r\n                >\r\n              </el-row>\r\n              <el-row>\r\n                <el-select v-model=\"job\" placeholder=\"请选择\">\r\n                  <el-option\r\n                    v-for=\"item in jobs\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"12\">\r\n                  <el-input\r\n                    v-model=\"adminPassword\"\r\n                    placeholder=\"请输入密码\"\r\n                    style=\"margin: 0 0 0 10px\"\r\n                  ></el-input>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                  <el-button type=\"success\" @click=\"beSuperAdmin\" circle\r\n                    ><i class=\"el-icon-thumb\"></i\r\n                  ></el-button>\r\n                </el-col>\r\n              </el-row>\r\n            </el-col>\r\n            <el-col :span=\"1\">\r\n              <div class=\"line\"></div>\r\n            </el-col>\r\n            <el-col :span=\"11\">\r\n              <el-input\r\n                v-model=\"userName\"\r\n                placeholder=\"请输入用户名\"\r\n              ></el-input>\r\n              <el-input v-model=\"password\" placeholder=\"请输入密码\"></el-input>\r\n              <el-input v-model=\"eMail\" placeholder=\"请输入邮箱\"></el-input>\r\n              <el-button @click=\"beAdmin\" type=\"primary\"\r\n                ><i class=\"el-icon-user-solid\"></i>新增人员</el-button\r\n              >\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 搜索 -->\r\n    <el-row>\r\n      <el-col :span=\"6\">\r\n        <el-input v-model=\"searchValue\" placeholder=\"请输入名字搜索\"></el-input>\r\n      </el-col>\r\n      <el-col :span=\"2\">\r\n        <el-button\r\n          style=\"margin: 10px\"\r\n          type=\"success\"\r\n          @click.native=\"searchByName\"\r\n          >搜索</el-button\r\n        >\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 表格开始 -->\r\n    <el-row v-loading=\"loading\">\r\n      <el-col :span=\"24\">\r\n        <el-table :data=\"personList\" border style=\"width: 100%\">\r\n          <el-table-column prop=\"id\" label=\"序列号\" width=\"70\" align=\"center\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"roles\"\r\n            label=\"身份\"\r\n            width=\"150\"\r\n            :formatter=\"dealRoles\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column prop=\"chinaname\" label=\"中文名\" width=\"200\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"name\" label=\"用户名\" width=\"150\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"officium\"\r\n            label=\"职位\"\r\n            width=\"150\"\r\n            :formatter=\"formatRoles\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"isadmin\"\r\n            label=\"查看权限\"\r\n            width=\"160\"\r\n            :formatter=\"formatBoolean\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column prop=\"email\" label=\"邮箱\" width=\"auto\">\r\n          </el-table-column>\r\n          <el-table-column fixed=\"right\" label=\"操作\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <button class=\"operationBtn\" @click=\"setRoles(scope.row.id)\">\r\n                设职\r\n              </button>\r\n              <button\r\n                class=\"operationBtn\"\r\n                @click=\"handleSetAdmin(scope.row.id)\"\r\n              >\r\n                设权\r\n              </button>\r\n              <button class=\"operationBtn\" @click=\"handleDelUser(scope.row.id)\">\r\n                删除\r\n              </button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page.sync=\"currentPage\"\r\n          :page-size=\"5\"\r\n          layout=\"prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n        >\r\n        </el-pagination>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getUsers,\r\n  updateChinaName,\r\n  enrollAdmin,\r\n  setAdmin,\r\n  delUser,\r\n  setRole,\r\n  getSuperAdmin,\r\n  uploadImg,\r\n  searchName,\r\n} from \"../../api/home\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      personList: [],\r\n      ChinaName: \"\",\r\n      userName: \"\",\r\n      password: \"\",\r\n      chinaname: \"\",\r\n      eMail: \"\",\r\n      //加载\r\n      loading: false,\r\n      //分页\r\n      currentPage: 0,\r\n      total: 200,\r\n      jobs: [\r\n        {\r\n          value: \"FrontEnd\",\r\n          label: \"[研发]-前端\",\r\n        },\r\n        {\r\n          value: \"BackEnd\",\r\n          label: \"[研发]-后端\",\r\n        },\r\n        {\r\n          value: \"Anchor\",\r\n          label: \"[技术]-导播\",\r\n        },\r\n        {\r\n          value: \"BOSS\",\r\n          label: \"[管理]-主办方\",\r\n        },\r\n        {\r\n          value: \"Arranger\",\r\n          label: \"[管理]-排班人\",\r\n        },\r\n        {\r\n          value: \"Secretary\",\r\n          label: \"[管理]-秘书\",\r\n        },\r\n        {\r\n          value: \"Recruiter\",\r\n          label: \"[管理]-招募\",\r\n        },\r\n        {\r\n          value: \"Designer\",\r\n          label: \"[宣发]-海报\",\r\n        },\r\n        {\r\n          value: \"Video\",\r\n          label: \"[宣发]-视频剪辑\",\r\n        },\r\n        {\r\n          value: \"Public\",\r\n          label: \"[言论]-公关\",\r\n        },\r\n        {\r\n          value: \"Administration\",\r\n          label: \"[言论]-群管\",\r\n        },\r\n        {\r\n          value: \"Commentator\",\r\n          label: \"[技术]-解说\",\r\n        },\r\n        {\r\n          value: \"referees\",\r\n          label: \"[技术]-裁判\",\r\n        },\r\n      ],\r\n      job: \"\",\r\n      adminPassword: \"\",\r\n      logoImg: \"\",\r\n      //搜索\r\n      searchValue: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initGetUsers(1, 5);\r\n  },\r\n  methods: {\r\n    initGetUsers(page, pagesize) {\r\n      this.loading = true;\r\n      getUsers(page, pagesize)\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          this.personList = res.data;\r\n          setTimeout(() => {\r\n            this.loading = false;\r\n          }, 800);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          setTimeout(() => {\r\n            this.loading = false;\r\n          }, 800);\r\n        });\r\n    },\r\n    updateName() {\r\n      updateChinaName(this.ChinaName)\r\n        .then(() => {\r\n          this.$message.success(\"修改成功！\");\r\n          this.initGetInfo();\r\n        })\r\n        .catch((err) => {\r\n          this.$message.error(err.data);\r\n        });\r\n    },\r\n    beAdmin() {\r\n      enrollAdmin(this.userName, this.password, this.ChinaName, this.eMail)\r\n        .then(() => {\r\n          this.$message.success(\"成功！\");\r\n          this.initGetUsers(1, 5);\r\n        })\r\n        .catch((err) => {\r\n          this.$message.error(\"失败\" + err);\r\n        });\r\n    },\r\n    // 设置管理员\r\n    handleSetAdmin(id) {\r\n      setAdmin(id)\r\n        .then(() => {\r\n          this.$message.success(\"设置成功！\");\r\n          this.initGetUsers(this.currentPage, 5);\r\n        })\r\n        .catch(() => {\r\n          this.$message.error(\"设置失败，请联系超级管理员！\");\r\n        });\r\n    },\r\n    // 删除用户\r\n    handleDelUser(id) {\r\n      console.log(id);\r\n      delUser(id)\r\n        .then(() => {\r\n          this.$message.success(\"删除成功！\");\r\n          this.initGetUsers(this.currentPage, 5);\r\n        })\r\n        .catch(() => {\r\n          this.$message.error(\"删除失败，请联系超级管理员！\");\r\n        });\r\n    },\r\n    //分页改变\r\n    handleCurrentChange(val) {\r\n      this.initGetUsers(val, 5);\r\n    },\r\n    //formatter\r\n    formatBoolean(row, column, cellValue) {\r\n      var ret = \"\"; //你想在页面展示的值\r\n      if (cellValue) {\r\n        ret = \"管理用户的增删改查\"; //根据自己的需求设定\r\n      } else {\r\n        ret = \"无权限\";\r\n      }\r\n      return ret;\r\n    },\r\n    formatRoles(row, column, cellValue) {\r\n      var rec = \"\";\r\n      switch (cellValue) {\r\n        case \"FrontEnd\":\r\n          rec = \"[研发]-前端\";\r\n          break;\r\n        case \"BackEnd\":\r\n          rec = \"[研发]-后端\";\r\n          break;\r\n        case \"Anchor\":\r\n          rec = \"[技术]-导播\";\r\n          break;\r\n        case \"BOSS\":\r\n          rec = \"[管理]-主办方\";\r\n          break;\r\n        case \"Arranger\":\r\n          rec = \"[管理]-排班人\";\r\n          break;\r\n        case \"Secretary\":\r\n          rec = \"[管理]-秘书\";\r\n          break;\r\n        case \"Recruiter\":\r\n          rec = \"[管理]-招募\";\r\n          break;\r\n        case \"Designer\":\r\n          rec = \"[宣发]-海报\";\r\n          break;\r\n        case \"Video\":\r\n          rec = \"[宣发]-视频剪辑\";\r\n          break;\r\n        case \"Public\":\r\n          rec = \"[言论]-公关\";\r\n          break;\r\n          case \"Administration\":\r\n          rec = \"[言论]-群管\";\r\n          break;\r\n          case \"Commentator\":\r\n          rec = \"[技术]-解说\";\r\n          break;\r\n          case \"referees\":\r\n          rec = \"[技术]-裁判\";\r\n          break;\r\n          default:\r\n          rec = '无职位'\r\n      }\r\n      return rec\r\n    },\r\n    dealRoles(row, column, cellValue) {\r\n      let rec = \"\";\r\n      if (cellValue.includes(\"nbadmin\")) {\r\n        rec = \"超级管理员\";\r\n      } else if (cellValue.includes(\"admin\")) {\r\n        rec = \"管理员\";\r\n      } else {\r\n        rec = \"普通用户\";\r\n      }\r\n      return rec;\r\n    },\r\n    //设置职位\r\n    setRoles(id) {\r\n      setRole(id, this.job)\r\n        .then(() => {\r\n          this.$message.success(\"设置成功！\");\r\n          this.initGetUsers(this.currentPage, 5);\r\n        })\r\n        .catch((err) => {\r\n          this.$message.error(err);\r\n        });\r\n    },\r\n    //成为超级管理员\r\n    beSuperAdmin() {\r\n      console.log(this.adminPassword);\r\n      getSuperAdmin(this.adminPassword)\r\n        .then(() => {\r\n          this.$message.success(\"设置成功！\");\r\n        })\r\n        .catch((err) => {\r\n          this.$message.error(err);\r\n        });\r\n    },\r\n    //上传头像\r\n    transformBase(file) {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file.raw);\r\n      const self = this;\r\n      reader.onload = function () {\r\n        // 转换完成输出该文件base64编码\r\n        self.logoImg = reader.result;\r\n        self.$store.commit(\"SET_LOGO\", self.logoImg);\r\n        self.uploadImg(self.logoImg);\r\n      };\r\n    },\r\n    //上传请求\r\n    uploadImg(logoImg) {\r\n      uploadImg(logoImg)\r\n        .then((res) => {\r\n          console.log(res.data);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    //判断文件大小\r\n    beforeAvatarUpload(file) {\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n      console.log(isLt2M);\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isLt2M;\r\n    },\r\n    //搜索\r\n    searchByName() {\r\n      this.loading = true;\r\n      searchName(this.searchValue)\r\n        .then((res) => {\r\n          if (res.data !== []) {\r\n            this.personList = res.data;\r\n          } else {\r\n            this.$message.error(\"未搜索到该用户！\");\r\n          }\r\n          setTimeout(() => {\r\n            this.loading = false;\r\n          }, 500);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          setTimeout(() => {\r\n            this.loading = false;\r\n          }, 500);\r\n        });\r\n    },\r\n  },\r\n  computed: {\r\n    userInfo() {\r\n      return this.$store.state.userInfo;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@btn-color: #53a0d4;\r\n.el-row {\r\n  margin-bottom: 20px;\r\n}\r\n.updateInfo {\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\r\n  overflow-y: scroll;\r\n  height: 220px;\r\n  width: 40%;\r\n}\r\n.el-input {\r\n  margin: 10px;\r\n  width: 70%;\r\n}\r\n.el-button {\r\n  margin: 0 10px;\r\n  width: 70%;\r\n}\r\n.el-card {\r\n  margin: 0 20px;\r\n  height: 38vh;\r\n}\r\n.el-select {\r\n  width: 70%;\r\n  margin-left: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n.line {\r\n  height: 30vh;\r\n  width: 2px;\r\n  border-right: 1px solid #ddd;\r\n}\r\n\r\n.operationBtn {\r\n  text-align: center;\r\n  line-height: 22px;\r\n  float: left;\r\n  height: 22px;\r\n  width: 40px;\r\n  outline: none;\r\n  margin: 0 3px;\r\n  background-color: @btn-color;\r\n  border-color: transparent;\r\n  color: #fff;\r\n  &:nth-child(3) {\r\n    background-color: red;\r\n  }\r\n  &:hover {\r\n    background-color: #ddd;\r\n    color: #333;\r\n  }\r\n}\r\n.user {\r\n  display: flex;\r\n  align-items: center;\r\n  padding-bottom: 20px;\r\n  margin-bottom: 20px;\r\n  border-bottom: 1px solid #ccc;\r\n  .el-image {\r\n    margin-right: 10%;\r\n    width: 120px;\r\n    height: 120px;\r\n    border-radius: 50%;\r\n  }\r\n  /deep/.image-slot {\r\n    color: #fff;\r\n    background: red;\r\n    text-align: center;\r\n    line-height: 120px;\r\n    font-size: 25px;\r\n  }\r\n  .userinfo {\r\n    .name {\r\n      width: 150px;\r\n      overflow-x: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      font-size: 2em;\r\n      margin-bottom: 10px;\r\n    }\r\n    .access {\r\n      color: #999999;\r\n    }\r\n  }\r\n}\r\n\r\n.login-info {\r\n  p {\r\n    line-height: 24px;\r\n    font-size: 14px;\r\n    color: #999;\r\n    span {\r\n      color: #666;\r\n      margin-left: 60px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=e59c345a&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=e59c345a&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e59c345a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=e59c345a&prod&scoped=true&lang=less&\""],"sourceRoot":""}
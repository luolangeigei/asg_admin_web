(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fdba582"],{"25cf":function(t,e,n){},4737:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return o}));var a=n("b775");function i(){return Object(a["a"])({url:"/api/v1/Events",method:"get"})}function s(t,e,n){return Object(a["a"])({url:"/api/v1/admin/Events",method:"post",params:{name:t,is_over:e,opentime:n}})}function r(t){return a["a"].delete("/api/v1/admin/Events?event_name="+t)}function o(t,e){return Object(a["a"])({url:"/api/v1/admin/Events",method:"put",params:{event_name:t},data:{id:e.id,name:e.name,is_over:e.is_over,opentime:e.opentime}})}},"584b":function(t,e,n){"use strict";n("25cf")},d1d5:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("el-row",[e("el-select",{staticStyle:{"margin-bottom":"10px","margin-right":"30px"},attrs:{size:"mini"},on:{change:t.handleChange},model:{value:t.eventsname,callback:function(e){t.eventsname=e},expression:"eventsname"}},t._l(t.options,(function(n){return e("el-option",{key:n.name,attrs:{label:n.name,value:n.name}},[e("span",[t._v(t._s(n.name))]),n.is_over?e("i",{staticClass:"el-icon-warning",staticStyle:{color:"red","margin-left":"20px"}}):e("i",{staticClass:"el-icon-success",staticStyle:{color:"green","margin-left":"20px"}})])})),1),t.isOver?e("span",[e("el-tooltip",{attrs:{effect:"dark",content:"进入赛程页面-赛季-结束赛程",placement:"top"}},[e("el-tag",{attrs:{type:"danger"}},[t._v("已结束")])],1)],1):e("el-tag",{attrs:{type:"success"}},[t._v("进行中")])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{height:"75vh",data:t.teamList,border:""}},[e("el-table-column",{attrs:{prop:"timer",label:"报名日期",width:"200",formatter:t.formatterTimer}}),e("el-table-column",{attrs:{label:"LOGO",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticClass:"logo_url",attrs:{src:t.row.logo_uri}})]}}])}),e("el-table-column",{attrs:{prop:"name",label:"战队名",width:"200"}}),e("el-table-column",{attrs:{prop:"piaoshu",label:"获赞数",width:"100"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.check(n.row)}}},[t._v("检查")]),e("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.delTeam(n.row)}}},[t._v("删除")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":5,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},i=[],s=n("ba6c"),r=n("4737"),o={name:"AllTeam",mounted(){this.initData(1,10,"time",this.eventsname),this.initSeason()},data(){return{teamList:[],options:[],currentPage:1,total:200,loading:!1,isOver:null,eventsname:"第一届ASG高校赛"}},methods:{initData(t,e,n,a){this.loading=!0,Object(s["c"])(t,e,n,a).then(t=>{this.teamList=t.data,setTimeout(()=>{this.loading=!1},1e3)}).catch(t=>{console.log(t),setTimeout(()=>{this.loading=!1},1e3)})},formatterTimer(t,e,n){let a,i=n.slice(0,4),s=n.slice(5,7),r=n.slice(8,10),o=n.slice(11,19);return a=i+"年"+s+"月"+r+"日 "+o,a},check(t){this.$store.commit("updateTeamName",t.name),this.$emit("searchteam",t.name)},delTeam(t){this.$confirm("是否删除该战队信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{Object(s["a"])(t.name).then(()=>{this.$message.success("删除成功"),this.initData(1,10,"time",this.eventsname)}).catch(t=>{this.$message.error("删除失败")})}).catch(()=>{this.$message.warning("取消删除！")})},handleCurrentChange(){this.initData(this.currentPage,10,"time",this.eventsname)},initSeason(){Object(r["b"])().then(t=>{this.options=t.data}).catch(t=>{console.log(t)})},handleChange(t){let e=this.options.map(t=>t.name).indexOf(t);this.isOver=this.options[e].is_over,this.initData(1,10,"time",this.eventsname)}}},l=o,c=(n("584b"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,"42abe92e",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-1fdba582.92fff81b.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e9f28c2"],{"08c7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("el-row",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("赛程管理")])],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[t("el-step",{attrs:{title:"步骤 1"}}),t("el-step",{attrs:{title:"步骤 2"}}),t("el-step",{attrs:{title:"步骤 3"}}),t("el-step",{attrs:{title:"步骤 4"}})],1),t("div",{staticClass:"opeBox"},[1===this.active?[t("el-select",{attrs:{placeholder:"请选择赛程分类"},model:{value:e.belong,callback:function(t){e.belong=t},expression:"belong"}},e._l(e.eventOptions,(function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),t("el-select",{attrs:{placeholder:"请选择主场战队"},model:{value:e.team1_name,callback:function(t){e.team1_name=t},expression:"team1_name"}},e._l(e.allTeam,(function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),t("el-select",{attrs:{placeholder:"请选择客场战队"},model:{value:e.team2_name,callback:function(t){e.team2_name=t},expression:"team2_name"}},e._l(e.allTeam,(function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)]:2===this.active?[t("el-input",{attrs:{placeholder:"选择比赛开始日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})]:3===this.active?[t("el-select",{attrs:{placeholder:"请选择裁判"},model:{value:e.referee_value,callback:function(t){e.referee_value=t},expression:"referee_value"}},e._l(e.referee,(function(e){return t("el-option",{key:e.chinaname,attrs:{label:e.chinaname,value:e.chinaname}})})),1),t("el-select",{attrs:{placeholder:"请选择解说"},model:{value:e.commentary_value,callback:function(t){e.commentary_value=t},expression:"commentary_value"}},e._l(e.commentary,(function(e){return t("el-option",{key:e.chinaname,attrs:{label:e.chinaname,value:e.chinaname}})})),1),t("el-select",{attrs:{placeholder:"请选择导播"},model:{value:e.instructor_value,callback:function(t){e.instructor_value=t},expression:"instructor_value"}},e._l(e.instructor,(function(e){return t("el-option",{key:e.chinaname,attrs:{label:e.chinaname,value:e.chinaname}})})),1)]:e._e(),t("div",{staticClass:"btn_wrap"},[1!==e.active?t("el-button",{staticStyle:{"margin-top":"12px"},attrs:{type:"primary"},on:{click:e.retry}},[t("i",{staticClass:"el-icon-caret-left"}),e._v("上一步")]):e._e(),4!==e.active?t("el-button",{staticStyle:{"margin-top":"12px"},attrs:{type:"primary"},on:{click:e.next}},[t("i",{staticClass:"el-icon-caret-right"}),e._v("下一步")]):e._e(),4===e.active?t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.btnloading,expression:"btnloading"}],staticStyle:{"margin-top":"12px"},attrs:{type:"warning","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},nativeOn:{click:function(t){return e.submit.apply(null,arguments)}}},[e._v("发布")]):e._e()],1)],2)],1)],1),t("el-row",[t("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"赛程信息",name:"first"}},[t("schedule-table")],1),t("el-tab-pane",{attrs:{label:"赛季管理",name:"second"}},[t("SetSeason")],1)],1)],1)],1)},i=[],r=a("c0c9"),l=a("ba6c"),c=a("4737"),o={name:"",data(){return{active:1,allTeam:[],team1_name:"",team2_name:"",belong:"",startTime:"YYYY-MM-DDThh:mm:ss.0000000",btnloading:!1,scheduleData:[],referee:[],referee_value:"",commentary:[],commentary_value:"",instructor:[],instructor_value:"",bilibiliuri:"",activeName:"first",eventOptions:[]}},components:{ScheduleTable:()=>a.e("chunk-ce671dd0").then(a.bind(null,"e601")),SetSeason:()=>a.e("chunk-2d0c76e2").then(a.bind(null,"511a"))},methods:{next(){if(1===this.active||2===this.active)this.active++;else{if(3!==this.active)return;this.active++}},retry(){1!==this.active&&this.active--},submit(){this.btnloading=!0,this.setSchedule(),setTimeout(()=>{this.btnloading=!1},2e3)},setSchedule(){Object(r["e"])(this.team1_name,this.team2_name,this.startTime,this.belong,this.commentary_value,this.referee_value,this.bilibiliuri).then(e=>{this.$message.success(e.data)}).catch(e=>{this.$message.error("设置失败！"),console.log(e)})},initTeamName(){Object(l["c"])(1,5,"time","第一届ASG高校赛").then(e=>{console.log(e),this.allTeam=e.data}).catch(e=>{console.log(e)})},initGetCommentary(){let e={opname:"Commentator"};Object(r["d"])(e).then(e=>{this.commentary=e.data}).catch(e=>{console.log(e)})},initGetReferee(){let e={opname:"referees"};Object(r["d"])(e).then(e=>{this.referee=e.data}).catch(e=>{console.log(e)})},initGetAnchor(){let e={opname:"Anchor"};Object(r["d"])(e).then(e=>{this.instructor=e.data}).catch(e=>{console.log(e)})},handleClick(e){this.activeName=e.name},initSeason(){Object(c["b"])().then(e=>{this.eventOptions=e.data}).catch(e=>{console.log(e)})}},mounted(){this.initTeamName(),this.initGetCommentary(),this.initGetAnchor(),this.initGetReferee(),this.initSeason()}},s=o,u=(a("8b97"),a("2877")),m=Object(u["a"])(s,n,i,!1,null,"18e72cd2",null);t["default"]=m.exports},4737:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return c}));var n=a("b775");function i(){return Object(n["a"])({url:"/api/v1/Events",method:"get"})}function r(e,t,a){return Object(n["a"])({url:"/api/v1/admin/Events",method:"post",params:{name:e,is_over:t,opentime:a}})}function l(e){return n["a"].delete("/api/v1/admin/Events?event_name="+e)}function c(e,t){return Object(n["a"])({url:"/api/v1/admin/Events",method:"put",params:{event_name:e},data:{id:t.id,name:t.name,is_over:t.is_over,opentime:t.opentime}})}},"8b97":function(e,t,a){"use strict";a("c0f9")},ba6c:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c}));var n=a("b775");function i(e){return n["a"].get("/api/v1/admin/form/"+e)}function r(e,t,a,i){return Object(n["a"])({url:`/api/v1/form/all?page=${e}&page_long=${t}&sort=${a}&eventsname=${i}`,method:"get"})}function l(e){return n["a"].delete("/api/v1/admin/form?formname="+e)}function c(){return n["a"].get("/api/v1/user/form")}},c0c9:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"f",(function(){return u}));var n=a("b775");function i(e,t,a,i,r,l,c){return n["a"].post("/api/v1/admin/game",{team1_name:e,team2_name:t,opentime:a,belong:i,commentary:r,referee:l,bilibiliuri:c})}function r(e,t,a){return n["a"].get(`/api/v1/game?page=${e}&page_long=${t}&belong=${a}`)}function l(e){return n["a"].delete("/api/v1/admin/game?gameid="+e)}function c(e){return Object(n["a"])({url:"/api/v1/getuserbyop",method:"get",params:e})}function o(){return n["a"].post("/api/v1/admin/team")}function s(e,t){return n["a"].put("/api/v1/admin/game?gameid="+e,t)}function u(e,t){return Object(n["a"])({url:`/api/v1/admin/game/win?teamid=${e}&winteam=${t}`,method:"post"})}},c0f9:function(e,t,a){}}]);
//# sourceMappingURL=chunk-5e9f28c2.8397d716.js.map